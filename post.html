<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Knowledge Hub â€“ Article</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --text: #222;
  --bg: #ffffff;
  --primary: #1a73e8;
  --gray: #666;
  --border: #e3e7ea;
}

body {
  font-family: "Inter", sans-serif;
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--text);
  line-height: 1.75;
}

header {
  background: #0d1117;
  color: #fff;
  padding: 24px;
  text-align: center;
  font-size: 22px;
  font-weight: 600;
  letter-spacing: -0.5px;
}

.container {
  max-width: 900px;
  margin: 40px auto;
  padding: 0 20px;
  display: flex;
  gap: 40px;
}

article {
  flex: 3;
  background: white;
  padding: 32px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 6px 18px rgba(0,0,0,0.05);
}

.sidebar {
  flex: 1;
  position: sticky;
  top: 20px;
  height: fit-content;
}

.sidebar-box {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  border: 1px solid var(--border);
  margin-bottom: 20px;
}

h1 {
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -1px;
}

h2, h3 {
  font-weight: 600;
  margin-top: 28px;
}

p, li {
  font-size: 18px;
  margin-bottom: 16px;
}

ul {
  padding-left: 20px;
}

a { color: var(--primary); text-decoration: none; font-weight: 600; }

.meta {
  color: var(--gray);
  font-size: 15px;
  margin-bottom: 20px;
}

.button {
  display: block;
  background: var(--primary);
  color: #fff;
  padding: 12px;
  border-radius: 8px;
  text-align: center;
  margin-top: 10px;
  font-weight: 600;
}
</style>
</head>

<body>
<header>Knowledge Hub ðŸ“˜</header>

<div class="container">
  <article>
    <div class="meta" id="meta"></div>
    <div id="content">Loading...</div>
  </article>

  <div class="sidebar">
    <div class="sidebar-box">
      <h3>About the Author</h3>
      <p>We help you learn, grow, and build your digital future.</p>
    </div>

    <div class="sidebar-box">
      <h3>More Guides</h3>
      <div id="related-posts"></div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
async function loadPost() {
  const params = new URLSearchParams(window.location.search);
  const file = params.get("file");
  const response = await fetch(file);
  const text = await response.text();

  document.getElementById("content").innerHTML = marked.parse(text);

  const filename = file.split("/").pop().replace(".md", "");
  const date = filename.split("-").slice(0, 3).join("-");

  document.getElementById("meta").textContent =
    `ðŸ“… Published: ${date} â€¢ â±ï¸ Reading time: ~4 min`;
}

async function loadRelated() {
  const response = await fetch("posts/");
  const text = await response.text();
  const files = [...text.matchAll(/href="([^"]+\.md)"/g)].map(m => m[1]).slice(0,5);

  const box = document.getElementById("related-posts");
  files.forEach(f => {
    const link = document.createElement("a");
    link.href = `post.html?file=posts/${f}`;
    link.textContent = f.replace(".md", "").replace(/-/g, " ");
    link.style.display = "block";
    link.style.marginBottom = "8px";
    box.appendChild(link);
  });
}

loadPost();
loadRelated();
</script>

</body>
</html>
