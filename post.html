<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Article — Knowledge Hub</title>
<meta name="description" content="Article from Knowledge Hub" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

<style>
:root{--accent:#1a73e8;--muted:#6b7280}
*{box-sizing:border-box}
body{font-family:"Inter",system-ui,Arial;background:#fff;margin:0;color:#0f1724}
.container{max-width:880px;margin:26px auto;padding:20px}
.header{display:flex;align-items:center;gap:14px}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,#0ea5e9,#7c3aed);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
.title{margin:8px 0 14px;font-family:"Merriweather",serif;font-size:28px}
.meta{color:var(--muted);font-size:13px;margin-bottom:12px;display:flex;gap:12px;align-items:center}
.content{line-height:1.8;font-size:17px;color:#0b1220}
.ctaBox{margin-top:18px;padding:16px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid #eef5ff;display:flex;gap:12px;align-items:center;justify-content:space-between}
.ctaBtn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:700}
.suggest{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
.suggest a{display:block;padding:8px 10px;border-radius:10px;background:#fbfdff;border:1px solid #eef5ff;color:var(--accent);text-decoration:none;font-weight:600}
@media (max-width:640px){.container{padding:14px}.title{font-size:22px}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">KH</div>
    <div>
      <div style="font-weight:700">Knowledge Hub</div>
      <div style="font-size:13px;color:var(--muted)">Practical. Tested. Fast.</div>
    </div>
  </div>

  <article id="article">
    <h1 id="post-title" class="title">Loading…</h1>
    <div class="meta" id="metaRow">
      <div class="pill" id="dateP">—</div>
      <div class="pill" id="readTime">—</div>
    </div>

    <div id="content" class="content">…</div>

    <hr />
    <div style="color:var(--muted);font-size:14px">You may also like</div>
    <div id="suggestions" class="suggest"></div>
  </article>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
(async function(){
  const params = new URLSearchParams(window.location.search);
  const fileParam = params.get('file');

  if(!fileParam){
    document.querySelector('#post-title').textContent = 'No post specified';
    return;
  }

  const res = await fetch("./" + fileParam);
  const md = await res.text();

  document.querySelector('#content').innerHTML = marked.parse(md);

  const titleMatch = md.match(/^#\s+(.+)$/m);
  const title = titleMatch ? titleMatch[1] : fileParam.split('/').pop();
  document.querySelector('#post-title').textContent = title;

  const datePart = fileParam.split('/').pop().slice(0,10);
  document.querySelector('#dateP').textContent = new Date(datePart).toLocaleDateString();

  const plain = md.replace(/^#.*$/mg,'');
  document.querySelector('#readTime').textContent = Math.ceil(plain.split(/\s+/).length / 200) + " min read";

  const list = await (await fetch("./posts/index.json")).json();
  const suggestions = list.filter(f => f !== fileParam.split('/').pop()).slice(0,6);

  document.querySelector('#suggestions').innerHTML = suggestions.map(f =>
    `<a href="post.html?file=posts/${f}">${f.replace(/\.md$/,'').replace(/-/g,' ').slice(11)}</a>`
  ).join('');
})();
</script>
</body>
</html>
